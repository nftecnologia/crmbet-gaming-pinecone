# ðŸš€ PRODUCTION ENVIRONMENT - ULTRA-ROBUSTO
# Sistema configurado para escala massiva: bilhÃµes de transaÃ§Ãµes

# === DATABASE CONFIGURATION (Ultra-Performance) ===
DATABASE_URL=${{Postgres.DATABASE_URL}}
DB_POOL_MIN=50
DB_POOL_MAX=200
DB_CONNECTION_TIMEOUT=30000
DB_IDLE_TIMEOUT=30000
DB_STATEMENT_TIMEOUT=30000
DB_ENABLE_SSL=true
DB_READ_REPLICAS=3
DB_ENABLE_SHARDING=true

# === REDIS CONFIGURATION (Clustering) ===
REDIS_URL=${{Redis.REDIS_URL}}
REDIS_CLUSTER_ENABLED=true
REDIS_MAX_RETRIES=3
REDIS_RETRY_DELAY=100
REDIS_CONNECT_TIMEOUT=10000
REDIS_COMMAND_TIMEOUT=5000
REDIS_MEMORY_POLICY=allkeys-lru

# === RABBITMQ CONFIGURATION (HA Clustering) ===
RABBITMQ_URL=${{RabbitMQ.RABBITMQ_URL}}
RABBITMQ_CLUSTER_SIZE=3
RABBITMQ_ENABLE_DLQ=true
RABBITMQ_MAX_RETRIES=3
RABBITMQ_PREFETCH_COUNT=100
RABBITMQ_HEARTBEAT=60

# === SERVER CONFIGURATION (100k+ RPS) ===
NODE_ENV=production
PORT=$PORT
SERVER_TIMEOUT=30000
KEEP_ALIVE_TIMEOUT=65000
MAX_CONNECTIONS=10000
CLUSTER_WORKERS=auto
GRACEFUL_SHUTDOWN_TIMEOUT=30000

# === RATE LIMITING (Intelligent) ===
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=1000
RATE_LIMIT_ENABLE_REDIS=true
RATE_LIMIT_SKIP_SUCCESS=false
RATE_LIMIT_ENABLE_DDoS_PROTECTION=true

# === SECURITY (Military-Grade) ===
JWT_SECRET=${{Railway.JWT_SECRET}}
JWT_EXPIRY=24h
JWT_REFRESH_EXPIRY=7d
BCRYPT_ROUNDS=12
SESSION_SECRET=${{Railway.SESSION_SECRET}}
ENABLE_CORS=true
CORS_ORIGIN=https://*.railway.app,https://localhost:3000
HELMET_ENABLED=true
RATE_LIMIT_ENABLED=true

# === ML PIPELINE (Distributed) ===
ML_WORKERS=32
ML_BATCH_SIZE=2000
ML_TIMEOUT_MS=10000
ML_ENABLE_GPU=false
ML_DASK_SCHEDULER=distributed
ML_MODEL_CACHE_SIZE=1000
ML_FEATURE_STORE_CACHE_TTL=3600

# === ETL CONFIGURATION (TB+/hour) ===
ETL_BATCH_SIZE=1000000
ETL_MEGA_BATCH_SIZE=10000000
ETL_MAX_WORKERS=64
ETL_ENABLE_COMPRESSION=true
ETL_COMPRESSION_ALGO=lz4
ETL_ENABLE_STREAMING=true
ETL_CIRCUIT_BREAKERS=true
ETL_MAX_RETRIES=3

# === MONITORING (Enterprise Observability) ===
ENABLE_METRICS=true
METRICS_PORT=9090
ENABLE_HEALTH_CHECKS=true
HEALTH_CHECK_INTERVAL=30000
LOG_LEVEL=info
ENABLE_DISTRIBUTED_TRACING=true
JAEGER_ENDPOINT=http://jaeger:14268/api/traces

# === PERFORMANCE OPTIMIZATION ===
NODE_OPTIONS=--max-old-space-size=8192 --max-semi-space-size=256
UV_THREADPOOL_SIZE=128
MALLOC_ARENA_MAX=2
MALLOC_MMAP_THRESHOLD_=131072
MALLOC_TRIM_THRESHOLD_=131072

# === SCALING CONFIGURATION ===
AUTO_SCALING_ENABLED=true
MIN_REPLICAS=3
MAX_REPLICAS=100
TARGET_CPU_UTILIZATION=70
TARGET_MEMORY_UTILIZATION=80
SCALE_UP_THRESHOLD=80
SCALE_DOWN_THRESHOLD=30

# === BACKUP & DISASTER RECOVERY ===
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"
BACKUP_RETENTION_DAYS=30
DR_RTO_MINUTES=30
DR_RPO_MINUTES=5

# === BUSINESS CONFIGURATION ===
ENVIRONMENT=production
APP_NAME="CRM Bet Ultra-Robusto"
APP_VERSION=2.0.0
COMPANY_NAME="Gaming Enterprise"
SUPPORT_EMAIL=support@crmbet.com

# === INTEGRATION APIS ===
SMARTICO_API_URL=https://api.smartico.ai
SMARTICO_API_KEY=${{Railway.SMARTICO_API_KEY}}
WEBHOOK_SECRET=${{Railway.WEBHOOK_SECRET}}
EXTERNAL_API_TIMEOUT=10000
EXTERNAL_API_RETRIES=3

# === COMPLIANCE & AUDIT ===
GDPR_ENABLED=true
LGPD_ENABLED=true
AUDIT_LOG_ENABLED=true
DATA_RETENTION_DAYS=2555
ANONYMIZATION_ENABLED=true
ENCRYPTION_AT_REST=true

# === FRONTEND CONFIGURATION ===
REACT_APP_API_URL=https://${{backend.RAILWAY_PUBLIC_DOMAIN}}
REACT_APP_WS_URL=wss://${{backend.RAILWAY_PUBLIC_DOMAIN}}
REACT_APP_ENV=production
REACT_APP_VERSION=2.0.0
REACT_APP_ENABLE_ANALYTICS=true
REACT_APP_SENTRY_DSN=${{Railway.SENTRY_DSN}}

# === CACHE CONFIGURATION ===
CACHE_TTL=3600
CACHE_MAX_SIZE=1000000
CACHE_ENABLE_COMPRESSION=true
CACHE_STRATEGY=lru
MEMORY_CACHE_SIZE=512